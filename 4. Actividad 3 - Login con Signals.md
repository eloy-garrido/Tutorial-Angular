# Actividad 3: Sistema de Login con Angular 20 y Signals

## üéØ Objetivo
Crear un sistema de autenticaci√≥n completo desde cero utilizando Angular 20, componentes standalone y signals para gestionar el estado de la aplicaci√≥n. El estudiante implementar√° un login funcional con credenciales hardcodeadas y navegaci√≥n condicional.

## üìã Prerequisitos
- Node.js 20.18+ instalado
- Angular CLI 20+ instalado
- Conocimientos b√°sicos de TypeScript
- Haber completado los tutoriales anteriores

## üöÄ Lo que aprender√°s
- ‚úÖ Crear un proyecto Angular 20 desde cero
- ‚úÖ Implementar componentes standalone
- ‚úÖ Utilizar signals para gesti√≥n de estado
- ‚úÖ Crear un sistema de autenticaci√≥n b√°sico
- ‚úÖ Implementar navegaci√≥n condicional
- ‚úÖ Manejar formularios reactivos con signals
- ‚úÖ Aplicar estilos modernos y responsive

---

## Paso 1: Crear el proyecto desde cero

### 1.1. Crear nuevo proyecto Angular 20

```bash
# Crear proyecto con routing habilitado
ng new sistema-login --routing=true --style=css

# Navegar al directorio
cd sistema-login

# Instalar Bootstrap
npm install bootstrap

# Verificar que Angular 20 est√© instalado
ng version
```

### 1.2. Configurar Bootstrap

Agregar Bootstrap a `angular.json` en la secci√≥n `styles`:

```json
"styles": [
  "node_modules/bootstrap/dist/css/bootstrap.min.css",
  "src/styles.css"
]
```

### 1.2. Estructura del proyecto esperada

```
sistema-login/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.ts              # Componente principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.html            # Template principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.css             # Estilos principales
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.routes.ts       # Configuraci√≥n de rutas
‚îÇ   ‚îú‚îÄ‚îÄ main.ts                 # Bootstrap de la aplicaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ styles.css              # Estilos globales
‚îî‚îÄ‚îÄ package.json
```

### 1.3. Configurar main.server.ts (si existe)

Si el proyecto genera un archivo `src/main.server.ts`, editarlo con:

```typescript
import { bootstrapApplication, type BootstrapContext } from '@angular/platform-browser';
import { App } from './app/app';
import { config } from './app/app.config.server';

const bootstrap = (context?: BootstrapContext) => bootstrapApplication(App, config, context);

export default bootstrap;
```

---

## Paso 2: Crear los componentes necesarios

### 2.1. Generar componente de Login

```bash
ng generate component login
```

### 2.2. Generar componente de Panel Admin

```bash
ng generate component panel-admin
```

### 2.3. Generar componente de Bot√≥n Personalizado

```bash
ng generate component boton-personalizado
```

---

## Paso 3: Implementar el componente principal (App)

### 3.1. Configurar `app.ts`

```typescript
import { Component, signal, computed } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import { LoginComponent } from './login/login';
import { PanelAdminComponent } from './panel-admin/panel-admin';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [RouterOutlet, LoginComponent, PanelAdminComponent],
  templateUrl: './app.html',
  styleUrl: './app.css'
})
export class App {
  // Signal para controlar el estado de autenticaci√≥n
  readonly isAuthenticated = signal(false);
  readonly currentUser = signal<string | null>(null);
  
  // Computed signal para mostrar mensaje de bienvenida
  readonly welcomeMessage = computed(() => {
    const user = this.currentUser();
    return user ? `¬°Bienvenido, ${user}!` : 'Por favor, inicia sesi√≥n';
  });

  // M√©todo para manejar el login exitoso
  onLoginSuccess(username: string) {
    this.isAuthenticated.set(true);
    this.currentUser.set(username);
  }

  // M√©todo para cerrar sesi√≥n
  logout() {
    this.isAuthenticated.set(false);
    this.currentUser.set(null);
  }
}
```

### 3.2. Crear template `app.html`

```html
<div class="d-flex flex-column min-vh-100 bg-gradient">
  <header class="bg-primary bg-opacity-10 text-center py-4 shadow-sm">
    <div class="container">
      <h1 class="display-5 fw-light text-white mb-3">üîê Sistema de Login - Angular 20</h1>
      <p class="lead text-white-50 mb-3">{{ welcomeMessage() }}</p>
      
      @if (isAuthenticated()) {
        <button class="btn btn-danger btn-lg rounded-pill" (click)="logout()">
          üö™ Cerrar Sesi√≥n
        </button>
      }
    </div>
  </header>

  <main class="flex-grow-1 d-flex align-items-center justify-content-center py-5">
    <div class="container">
      @if (!isAuthenticated()) {
        <app-login (loginSuccess)="onLoginSuccess($event)"></app-login>
      } @else {
        <app-panel-admin [username]="currentUser()"></app-panel-admin>
      }
    </div>
  </main>

  <footer class="bg-dark bg-opacity-25 text-center py-3">
    <p class="text-white-50 mb-0">Desarrollado con ‚ù§Ô∏è usando Angular 20 y Signals</p>
  </footer>
</div>
```

### 3.3. Estilos `app.css`

```css
/* Gradiente personalizado para el fondo */
.bg-gradient {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
```

---

## Paso 4: Implementar el componente de Login

### 4.1. Configurar `login/login.ts`

```typescript
import { Component, signal, output, computed } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { BotonPersonalizadoComponent } from '../boton-personalizado/boton-personalizado';

@Component({
  selector: 'app-login',
  standalone: true,
  imports: [FormsModule, BotonPersonalizadoComponent],
  templateUrl: './login.html',
  styleUrl: './login.css'
})
export class LoginComponent {
  // Signals para el formulario
  readonly username = signal('');
  readonly password = signal('');
  readonly isLoading = signal(false);
  readonly errorMessage = signal('');
  
  // Credenciales hardcodeadas
  private readonly validCredentials = {
    username: 'admin',
    password: '123456'
  };
  
  // Output signal para comunicar el login exitoso
  readonly loginSuccess = output<string>();
  
  // Computed signal para validar el formulario
  readonly isFormValid = computed(() => {
    return this.username().length > 0 && this.password().length > 0;
  });
  
  // Computed signal para el estado del bot√≥n
  readonly buttonText = computed(() => {
    return this.isLoading() ? 'üîÑ Iniciando sesi√≥n...' : 'üîë Iniciar Sesi√≥n';
  });

  // M√©todo para actualizar username
  updateUsername(value: string) {
    this.username.set(value);
    this.clearError();
  }

  // M√©todo para actualizar password
  updatePassword(value: string) {
    this.password.set(value);
    this.clearError();
  }

  // M√©todo para limpiar errores
  private clearError() {
    if (this.errorMessage()) {
      this.errorMessage.set('');
    }
  }

  // M√©todo para manejar el submit del formulario
  onSubmit() {
    if (!this.isFormValid() || this.isLoading()) {
      return;
    }

    this.isLoading.set(true);
    this.errorMessage.set('');

    // Simular delay de autenticaci√≥n
    setTimeout(() => {
      const username = this.username();
      const password = this.password();

      if (username === this.validCredentials.username && 
          password === this.validCredentials.password) {
        // Login exitoso
        this.loginSuccess.emit(username);
      } else {
        // Login fallido
        this.errorMessage.set('‚ùå Credenciales incorrectas. Intenta con admin/123456');
      }
      
      this.isLoading.set(false);
    }, 1500);
  }
}
```

### 4.2. Template `login/login.html`

```html
<div class="row justify-content-center">
  <div class="col-md-6 col-lg-4">
    <div class="card shadow-lg border-0 rounded-4 login-card">
      <div class="card-body p-4">
        <div class="text-center mb-4">
          <h2 class="card-title h3 text-dark">üîê Iniciar Sesi√≥n</h2>
          <p class="text-muted">Ingresa tus credenciales para acceder</p>
        </div>

        <form (ngSubmit)="onSubmit()">
          <div class="mb-3">
            <label for="username" class="form-label fw-semibold">üë§ Usuario</label>
            <input 
              type="text" 
              id="username"
              [value]="username()"
              (input)="updateUsername($event.target.value)"
              placeholder="Ingresa tu usuario"
              [disabled]="isLoading()"
              class="form-control form-control-lg rounded-3"
            >
          </div>

          <div class="mb-3">
            <label for="password" class="form-label fw-semibold">üîí Contrase√±a</label>
            <input 
              type="password" 
              id="password"
              [value]="password()"
              (input)="updatePassword($event.target.value)"
              placeholder="Ingresa tu contrase√±a"
              [disabled]="isLoading()"
              class="form-control form-control-lg rounded-3"
            >
          </div>

          @if (errorMessage()) {
            <div class="alert alert-danger d-flex align-items-center" role="alert">
              <div>{{ errorMessage() }}</div>
            </div>
          }

          <div class="d-grid mb-3">
            <app-boton-personalizado
              [texto]="buttonText()"
              [deshabilitado]="!isFormValid() || isLoading()"
              [cargando]="isLoading()"
              tipo="submit"
              (click)="onSubmit()"
            ></app-boton-personalizado>
          </div>
        </form>

        <div class="bg-light rounded-3 p-3 text-center">
          <p class="mb-2"><strong>üí° Credenciales de prueba:</strong></p>
          <p class="mb-1">Usuario: <code class="bg-white px-2 py-1 rounded">admin</code></p>
          <p class="mb-0">Contrase√±a: <code class="bg-white px-2 py-1 rounded">123456</code></p>
        </div>
      </div>
    </div>
  </div>
</div>
```

### 4.3. Estilos `login/login.css`

```css
/* Animaci√≥n de entrada para la tarjeta de login */
.login-card {
  animation: slideUp 0.6s ease-out;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
```

---

## Paso 5: Implementar el componente Bot√≥n Personalizado

### 5.1. Configurar `boton-personalizado/boton-personalizado.ts`

```typescript
import { Component, input, output } from '@angular/core';

@Component({
  selector: 'app-boton-personalizado',
  standalone: true,
  imports: [],
  templateUrl: './boton-personalizado.html',
  styleUrl: './boton-personalizado.css'
})
export class BotonPersonalizadoComponent {
  // Input signals con valores por defecto
  readonly texto = input('Bot√≥n');
  readonly tipo = input<'button' | 'submit'>('button');
  readonly deshabilitado = input(false);
  readonly cargando = input(false);
  readonly variante = input<'primary' | 'secondary' | 'danger'>('primary');
  
  // Output signal para el evento click
  readonly click = output<Event>();
  
  // M√©todo para manejar el click
  onClick(event: Event) {
    if (!this.deshabilitado() && !this.cargando()) {
      this.click.emit(event);
    }
  }
}
```

### 5.2. Template `boton-personalizado/boton-personalizado.html`

```html
<button 
  [type]="tipo()"
  [disabled]="deshabilitado() || cargando()"
  [class]="'btn btn-lg rounded-pill w-100 btn-' + variante() + (cargando() ? ' btn-loading' : '')"
  (click)="onClick($event)"
>
  @if (cargando()) {
    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
  }
  <span [class.visually-hidden]="cargando()">{{ texto() }}</span>
</button>
```

### 5.3. Estilos `boton-personalizado/boton-personalizado.css`

```css
/* Gradiente personalizado para bot√≥n primario */
.btn-primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
}

.btn-primary:hover:not(:disabled) {
  background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

/* Efecto de carga */
.btn-loading {
  position: relative;
}
```

---

## Paso 6: Implementar el componente Panel Admin

### 6.1. Configurar `panel-admin/panel-admin.ts`

```typescript
import { Component, input, signal, computed } from '@angular/core';
import { BotonPersonalizadoComponent } from '../boton-personalizado/boton-personalizado';

@Component({
  selector: 'app-panel-admin',
  standalone: true,
  imports: [BotonPersonalizadoComponent],
  templateUrl: './panel-admin.html',
  styleUrl: './panel-admin.css'
})
export class PanelAdminComponent {
  // Input signal para recibir el nombre de usuario
  readonly username = input<string | null>(null);
  
  // Signals para el estado del panel
  readonly activeSection = signal<'dashboard' | 'users' | 'settings'>('dashboard');
  readonly notifications = signal(3);
  readonly lastLogin = signal(new Date());
  
  // Computed signals para datos derivados
  readonly welcomeTitle = computed(() => {
    const user = this.username();
    return user ? `Panel de Administraci√≥n - ${user}` : 'Panel de Administraci√≥n';
  });
  
  readonly formattedLastLogin = computed(() => {
    return this.lastLogin().toLocaleString('es-ES', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  });
  
  readonly sectionTitle = computed(() => {
    const section = this.activeSection();
    switch (section) {
      case 'dashboard': return 'üìä Dashboard';
      case 'users': return 'üë• Gesti√≥n de Usuarios';
      case 'settings': return '‚öôÔ∏è Configuraci√≥n';
      default: return 'üìä Dashboard';
    }
  });

  // M√©todo para cambiar de secci√≥n
  changeSection(section: 'dashboard' | 'users' | 'settings') {
    this.activeSection.set(section);
  }
  
  // M√©todo para simular acci√≥n
  performAction(action: string) {
    alert(`Acci√≥n ejecutada: ${action}`);
  }
}
```

### 6.2. Template `panel-admin/panel-admin.html`

```html
<div class="container-fluid">
  <div class="card shadow-lg border-0 rounded-4 admin-panel">
    <div class="card-header bg-transparent border-bottom pb-3">
      <h2 class="card-title h3 text-dark mb-3">{{ welcomeTitle() }}</h2>
      <div class="d-flex flex-wrap gap-3">
        <span class="text-muted">üïí √öltimo acceso: {{ formattedLastLogin() }}</span>
        @if (notifications() > 0) {
          <span class="badge bg-warning text-dark rounded-pill">üîî {{ notifications() }} notificaciones</span>
        }
      </div>
    </div>

    <div class="card-body p-4">
      <div class="row">
        <div class="col-md-3">
          <div class="nav flex-column nav-pills" role="tablist">
            <button 
              class="nav-link text-start mb-2"
              [class.active]="activeSection() === 'dashboard'"
              (click)="changeSection('dashboard')"
            >
              üìä Dashboard
            </button>
            <button 
              class="nav-link text-start mb-2"
              [class.active]="activeSection() === 'users'"
              (click)="changeSection('users')"
            >
              üë• Usuarios
            </button>
            <button 
              class="nav-link text-start mb-2"
              [class.active]="activeSection() === 'settings'"
              (click)="changeSection('settings')"
            >
              ‚öôÔ∏è Configuraci√≥n
            </button>
          </div>
        </div>

        <div class="col-md-9">
          <div class="mb-4">
            <h3 class="h4 text-dark">{{ sectionTitle() }}</h3>
          </div>

          <div class="section-content">
            @switch (activeSection()) {
            @case ('dashboard') {
              <div class="row g-4 mb-4">
                <div class="col-md-6 col-lg-3">
                  <div class="card bg-primary text-white h-100">
                    <div class="card-body text-center">
                      <h5 class="card-title">üë• Usuarios Activos</h5>
                      <h2 class="display-6">1,234</h2>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3">
                  <div class="card bg-success text-white h-100">
                    <div class="card-body text-center">
                      <h5 class="card-title">üìà Ventas del Mes</h5>
                      <h2 class="display-6">$45,678</h2>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3">
                  <div class="card bg-info text-white h-100">
                    <div class="card-body text-center">
                      <h5 class="card-title">üéØ Conversi√≥n</h5>
                      <h2 class="display-6">12.5%</h2>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3">
                  <div class="card bg-warning text-dark h-100">
                    <div class="card-body text-center">
                      <h5 class="card-title">‚≠ê Satisfacci√≥n</h5>
                      <h2 class="display-6">4.8/5</h2>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="d-flex gap-3 flex-wrap">
                <app-boton-personalizado
                  texto="üìä Generar Reporte"
                  variante="primary"
                  (click)="performAction('Generar Reporte')"
                ></app-boton-personalizado>
                
                <app-boton-personalizado
                  texto="üìß Enviar Resumen"
                  variante="secondary"
                  (click)="performAction('Enviar Resumen')"
                ></app-boton-personalizado>
              </div>
            }
            
            @case ('users') {
              <div class="table-responsive mb-4">
                <table class="table table-hover">
                  <thead class="table-dark">
                    <tr>
                      <th>Usuario</th>
                      <th>Email</th>
                      <th>Estado</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>üë§ Juan P√©rez</td>
                      <td>juan@email.com</td>
                      <td><span class="badge bg-success">‚úÖ Activo</span></td>
                      <td>
                        <button class="btn btn-sm btn-outline-primary">‚úèÔ∏è Editar</button>
                      </td>
                    </tr>
                    <tr>
                      <td>üë§ Mar√≠a Garc√≠a</td>
                      <td>maria@email.com</td>
                      <td><span class="badge bg-danger">‚ùå Inactivo</span></td>
                      <td>
                        <button class="btn btn-sm btn-outline-primary">‚úèÔ∏è Editar</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              
              <div class="mb-3">
                <app-boton-personalizado
                  texto="‚ûï Nuevo Usuario"
                  variante="primary"
                  (click)="performAction('Crear Usuario')"
                ></app-boton-personalizado>
              </div>
            }
            
            @case ('settings') {
              <div class="row">
                <div class="col-md-6">
                  <div class="card mb-4">
                    <div class="card-header">
                      <h5 class="card-title mb-0">üîß Configuraci√≥n General</h5>
                    </div>
                    <div class="card-body">
                      <div class="mb-3">
                        <label class="form-label">üåê Idioma del Sistema</label>
                        <select class="form-select">
                          <option>Espa√±ol</option>
                          <option>English</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">üé® Tema</label>
                        <select class="form-select">
                          <option>Claro</option>
                          <option>Oscuro</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="card mb-4">
                    <div class="card-header">
                      <h5 class="card-title mb-0">üîî Notificaciones</h5>
                    </div>
                    <div class="card-body">
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" checked id="emailNotif">
                        <label class="form-check-label" for="emailNotif">
                          üìß Notificaciones por email
                        </label>
                      </div>
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="pushNotif">
                        <label class="form-check-label" for="pushNotif">
                          üì± Notificaciones push
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="mb-3">
                <app-boton-personalizado
                  texto="üíæ Guardar Cambios"
                  variante="primary"
                  (click)="performAction('Guardar Configuraci√≥n')"
                ></app-boton-personalizado>
              </div>
            }
            }
          </div>
  </div>
</div>
```

### 6.3. Estilos `panel-admin/panel-admin.css`

```css
/* Animaci√≥n de entrada para el panel */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.admin-panel {
  animation: fadeIn 0.6s ease-out;
}

/* Animaci√≥n para el contenido de las secciones */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.section-content {
  animation: slideIn 0.4s ease-out;
}
```

---

## Paso 7: Configurar estilos globales

### 7.1. Actualizar `src/styles.css`

```css
/* Importar Bootstrap (si no se agreg√≥ en angular.json) */
@import '~bootstrap/dist/css/bootstrap.min.css';

/* Estilos personalizados m√≠nimos */
body {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
}

/* Clase personalizada para el gradiente de fondo */
.gradient-bg {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
```

---

## Paso 8: Ejecutar y probar la aplicaci√≥n

### 8.1. Iniciar el servidor de desarrollo

```bash
# Ejecutar la aplicaci√≥n
ng serve

# O usar npm
npm start
```

### 8.2. Probar funcionalidades

1. **Abrir** `http://localhost:4200` en el navegador
2. **Probar login** con credenciales incorrectas
3. **Iniciar sesi√≥n** con `admin` / `123456`
4. **Navegar** entre las secciones del panel admin
5. **Probar** los botones y funcionalidades
6. **Cerrar sesi√≥n** y verificar que regresa al login

---

## üéØ Objetivos de Aprendizaje Completados

‚úÖ **Proyecto Angular 20**: Creado desde cero con la √∫ltima versi√≥n  
‚úÖ **Componentes Standalone**: Implementados sin m√≥dulos tradicionales  
‚úÖ **Signals**: Utilizados para gesti√≥n reactiva del estado  
‚úÖ **Sistema de Login**: Autenticaci√≥n funcional con credenciales hardcodeadas  
‚úÖ **Navegaci√≥n Condicional**: Mostrar/ocultar componentes seg√∫n autenticaci√≥n  
‚úÖ **Componente Reutilizable**: Bot√≥n personalizado con m√∫ltiples variantes  
‚úÖ **Formularios Reactivos**: Manejo de inputs con signals  
‚úÖ **Estilos Modernos**: UI responsive y atractiva  
‚úÖ **Arquitectura Limpia**: Separaci√≥n clara de responsabilidades  

---

## üöÄ Desaf√≠os Adicionales (Opcional)

### Nivel Intermedio:
1. **Persistencia**: Guardar el estado de login en localStorage
2. **Validaciones**: Agregar validaciones m√°s robustas al formulario
3. **Animaciones**: Implementar transiciones entre componentes
4. **Temas**: Agregar modo oscuro/claro

### Nivel Avanzado:
1. **Routing**: Implementar Angular Router para navegaci√≥n
2. **Guards**: Crear guards de autenticaci√≥n
3. **Servicios**: Extraer l√≥gica a servicios inyectables
4. **Testing**: Escribir tests unitarios para los componentes

---