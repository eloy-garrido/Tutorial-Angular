# Actividad 2: Mejorando el Juego con Signals - Angular 20

## Objetivo
Transformar el juego de nÃºmeros bÃ¡sico en una aplicaciÃ³n profesional utilizando **Signals** de Angular 20, mejorando el diseÃ±o para crear una experiencia de juego mÃ¡s atractiva y funcional.

## Prerequisitos
- Haber completado la **Actividad 1** (juego bÃ¡sico de nÃºmeros)
- Conocimientos bÃ¡sicos de HTML, CSS y TypeScript
- AplicaciÃ³n Angular 20 funcionando

## Lo que aprenderÃ¡s
- Â¿QuÃ© son los **Signals** y por quÃ© son importantes?
- Implementar **reactividad moderna** en Angular
- Crear interfaces de usuario **mÃ¡s responsivas** y **profesionales**
- Transformar variables tradicionales en **Signals reactivos**
- Mejorar la **experiencia de usuario** con diseÃ±o atractivo

---

## ğŸ¯ Â¿QuÃ© son los Signals?

### DefiniciÃ³n simple
Los **Signals** son como **cajas inteligentes** que:
- Guardan informaciÃ³n (como variables normales)
- **Avisan automÃ¡ticamente** cuando cambian
- **Actualizan la interfaz** sin cÃ³digo extra

### AnalogÃ­a del semÃ¡foro ğŸš¦
Imagina un semÃ¡foro:
- Cuando cambia de rojo a verde â†’ **todos los autos se enteran automÃ¡ticamente**
- Con Signals: cuando un valor cambia â†’ **toda la interfaz se actualiza sola**

### ComparaciÃ³n prÃ¡ctica

#### âŒ Antes (manera tradicional):
```typescript
export class JuegoViejo {
  numeroActual = 0;
  mensaje = 'Presiona el botÃ³n';
  
  generarNumero() {
    this.numeroActual = Math.floor(Math.random() * 10) + 1;
    this.mensaje = 'NÃºmero generado!';
    // Muchas veces Angular no detectaba los cambios automÃ¡ticamente
  }
}
```

#### âœ… Ahora (con Signals):
```typescript
export class JuegoNuevo {
  numeroActual = signal(0);
  mensaje = signal('Presiona el botÃ³n');
  
  generarNumero() {
    this.numeroActual.set(Math.floor(Math.random() * 10) + 1);
    this.mensaje.set('NÃºmero generado!');
    // Â¡La interfaz se actualiza AUTOMÃTICAMENTE! âœ¨
  }
}
```

---

## ğŸŒŸ Â¿Por quÃ© son importantes los Signals?

### 1. **Rendimiento mejorado** ğŸš€
- Solo actualiza lo que realmente cambiÃ³
- Apps hasta **30% mÃ¡s rÃ¡pidas**
- Menos consumo de recursos

### 2. **CÃ³digo mÃ¡s simple** ğŸ“
- Menos lÃ­neas de cÃ³digo
- MÃ¡s fÃ¡cil de entender
- Menos errores

### 3. **Reactividad automÃ¡tica** âš¡
- Los cambios se propagan solos
- No hay que preocuparse por detectar cambios manualmente

### 4. **Mejor experiencia de desarrollo** ğŸ‘¨â€ğŸ’»
- Debugging mÃ¡s claro
- Errores mÃ¡s comprensibles
- Herramientas mejoradas

---

## ğŸ® Â¿DÃ³nde se utilizan los Signals?

### 1. **GestiÃ³n de estado** (lo mÃ¡s comÃºn)
```typescript
const puntuacion = signal(0);
const vidas = signal(3);
const nivel = signal(1);
```

### 2. **Datos calculados automÃ¡ticamente**
```typescript
const puntuacion = signal(100);
const multiplicador = signal(2);
const puntuacionFinal = computed(() => puntuacion() * multiplicador());
// Si puntuacion o multiplicador cambian, puntuacionFinal se actualiza solo!
```

### 3. **Formularios reactivos**
```typescript
const nombre = signal('');
const email = signal('');
const formularioValido = computed(() => 
  nombre().length > 0 && email().includes('@')
);
```

### 4. **Interfaces de usuario dinÃ¡micas**
```typescript
const temaOscuro = signal(false);
const colorFondo = computed(() => 
  temaOscuro() ? '#000000' : '#ffffff'
);
```

---

## ğŸ“š Tipos de Signals - Ejemplos prÃ¡cticos

### 1. **Signal bÃ¡sico** (una caja que puedes cambiar)
```typescript
// Para guardar valores simples
const contador = signal(0);
const nombre = signal('Jugador');
const estaJugando = signal(false);

// Para cambiar valores
contador.set(10);              // Valor exacto
contador.update(n => n + 1);   // Basado en valor anterior
```

### 2. **Computed Signal** (se calcula automÃ¡ticamente)
```typescript
const puntos = signal(0);
const bonus = signal(50);

// Se actualiza automÃ¡ticamente cuando puntos o bonus cambian
const puntuacionTotal = computed(() => puntos() + bonus());

puntos.set(100);  // puntuacionTotal ahora es 150 Â¡automÃ¡ticamente!
```

### 3. **Input Signals** (para recibir datos)
```typescript
@Component({
  selector: 'app-jugador',
  template: `<h2>Hola {{nombre()}}</h2>`
})
export class JugadorComponent {
  nombre = input<string>('Invitado'); // Recibe el nombre del componente padre
}
```

### 4. **Effect** (para reaccionar a cambios)
```typescript
const puntuacion = signal(0);

// Se ejecuta cada vez que puntuacion cambia
effect(() => {
  console.log(`Nueva puntuaciÃ³n: ${puntuacion()}`);
  
  // Guardar en localStorage automÃ¡ticamente
  localStorage.setItem('puntuacion', puntuacion().toString());
});
```

---

## ğŸ¯ Tu MisiÃ³n: Transformar el juego con Signals

### Paso 1: Analiza tu cÃ³digo actual

Busca estas partes en tu `juego-numeros.ts`:
- Variables normales (ej: `numeroActual`, `mensaje`, `intentos`)
- MÃ©todos que cambian esas variables
- Template que muestra esos valores

### Paso 2: Importar Signals

```typescript
import { Component, signal, computed, effect } from '@angular/core';
import { RouterLink } from '@angular/router';
```

### Paso 3: Convertir variables a Signals

#### âŒ Tu cÃ³digo actual probablemente tiene:
```typescript
export class JuegoNumeros {
  numeroActual = 0;
  mensaje = 'Presiona el botÃ³n para empezar';
  intentos = 0;
  haGanado = false;
}
```

#### âœ… ConviÃ©rtelo a Signals:
```typescript
export class JuegoNumeros {
  numeroActual = signal(0);
  mensaje = signal('ğŸ² Presiona el botÃ³n para empezar');
  intentos = signal(0);
  haGanado = signal(false);
  
  // Â¡Nuevo! Signal computado que se actualiza automÃ¡ticamente
  estadoJuego = computed(() => {
    if (this.haGanado()) return 'ğŸ‰ Â¡GANASTE!';
    if (this.intentos() === 0) return 'ğŸ® Â¡Listo para jugar!';
    return `ğŸ¯ Intento ${this.intentos()}`;
  });
}
```

### Paso 4: Actualizar mÃ©todos

#### âŒ Antes:
```typescript
generarNumero() {
  this.numeroActual = Math.floor(Math.random() * 10) + 1;
  this.intentos++;
  
  if (this.numeroActual === 7) {
    this.mensaje = 'Â¡GANASTE!';
    this.haGanado = true;
  } else {
    this.mensaje = 'Sigue intentando';
  }
}
```

#### âœ… Con Signals:
```typescript
generarNumero() {
  const nuevoNumero = Math.floor(Math.random() * 10) + 1;
  
  this.numeroActual.set(nuevoNumero);
  this.intentos.update(i => i + 1);
  
  if (nuevoNumero === 7) {
    this.mensaje.set('ğŸ‰ Â¡INCREÃBLE! Â¡Obtuviste el 7! ğŸ‰');
    this.haGanado.set(true);
  } else if (nuevoNumero > 7) {
    this.mensaje.set('ğŸ“ˆ Â¡Muy alto! El 7 es menor');
  } else {
    this.mensaje.set('ğŸ“‰ Â¡Muy bajo! El 7 es mayor');
  }
}

reiniciarJuego() {
  this.numeroActual.set(0);
  this.mensaje.set('ğŸ² Presiona el botÃ³n para empezar');
  this.intentos.set(0);
  this.haGanado.set(false);
}
```

### Paso 5: Actualizar template HTML

#### âŒ Antes:
```html
<div class="numero-display">{{ numeroActual }}</div>
<div class="mensaje">{{ mensaje }}</div>
<div class="intentos">Intentos: {{ intentos }}</div>
```

#### âœ… Con Signals (Â¡nota los parÃ©ntesis!):
```html
<div class="numero-display">{{ numeroActual() }}</div>
<div class="mensaje">{{ mensaje() }}</div>
<div class="intentos">{{ estadoJuego() }}</div>
<div class="contador">Intentos: {{ intentos() }}</div>
```

---

## ğŸ¨ DiseÃ±o profesional - Tu template completo

Reemplaza todo tu `juego-numeros.html` con esto:

```html
<div class="game-container">
  <!-- Header del juego -->
  <header class="game-header">
    <h1 class="game-title">ğŸ² Juego del NÃºmero MÃ¡gico</h1>
    <p class="game-subtitle">Â¿PodrÃ¡s obtener el nÃºmero 7?</p>
  </header>

  <!-- Ãrea principal del juego -->
  <main class="game-board">
    <!-- Estado del juego -->
    <div class="status-panel">
      <div class="status-item">
        <span class="status-label">Estado:</span>
        <span class="status-value">{{ estadoJuego() }}</span>
      </div>
      <div class="status-item">
        <span class="status-label">Intentos:</span>
        <span class="status-value">{{ intentos() }}</span>
      </div>
    </div>

    <!-- Display del nÃºmero -->
    <div class="number-display" [class.winner]="haGanado()">
      <div class="number-label">Tu nÃºmero es:</div>
      <div class="number-value">
        {{ numeroActual() === 0 ? '?' : numeroActual() }}
      </div>
    </div>

    <!-- Mensaje de feedback -->
    <div class="message-panel" [class.success]="haGanado()">
      {{ mensaje() }}
    </div>

    <!-- Controles del juego -->
    <div class="game-controls">
      <button 
        class="btn btn-primary" 
        (click)="generarNumero()" 
        [disabled]="haGanado()">
        {{ haGanado() ? 'ğŸ‰ Â¡Ganaste!' : 'ğŸ² Lanzar Dado' }}
      </button>
      
      <button 
        class="btn btn-secondary" 
        (click)="reiniciarJuego()"
        *ngIf="intentos() > 0">
        ğŸ”„ Nuevo Juego
      </button>
    </div>

    <!-- EstadÃ­sticas -->
    <div class="stats-panel" *ngIf="intentos() > 0">
      <h3>ğŸ“Š EstadÃ­sticas</h3>
      <div class="stat-item">
        <span>Probabilidad de ganar:</span>
        <span>10% (1 de 10)</span>
      </div>
      <div class="stat-item">
        <span>Tu efectividad:</span>
        <span>{{ haGanado() ? (100 / intentos()).toFixed(1) : '0' }}%</span>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="game-footer">
    <a routerLink="/home" class="btn btn-outline">â† Volver al Inicio</a>
  </footer>
</div>
```

---

## ğŸš€ Funcionalidades extra con Signals

### 1. **Agregar historial de nÃºmeros** (Opcional)
```typescript
export class JuegoNumeros {
  // ... tus signals anteriores
  historial = signal<number[]>([]);
  
  generarNumero() {
    const nuevoNumero = Math.floor(Math.random() * 10) + 1;
    
    // Agregar al historial
    this.historial.update(hist => [...hist, nuevoNumero]);
    
    this.numeroActual.set(nuevoNumero);
    // ... resto de tu lÃ³gica
  }
  
  reiniciarJuego() {
    this.historial.set([]);
    // ... resto de tu lÃ³gica
  }
}
```

### 2. **Sistema de puntuaciÃ³n** (Opcional)
```typescript
export class JuegoNumeros {
  // ... tus signals anteriores
  puntuacion = signal(0);
  
  // Signal computado para nivel de dificultad
  nivelDificultad = computed(() => {
    const intentos = this.intentos();
    if (intentos < 3) return 'ğŸŸ¢ FÃ¡cil';
    if (intentos < 6) return 'ğŸŸ¡ Medio';
    return 'ğŸ”´ DifÃ­cil';
  });
  
  generarNumero() {
    // ... tu lÃ³gica actual
    
    if (nuevoNumero === 7) {
      // Calcular puntos basado en intentos
      const puntos = Math.max(100 - (this.intentos() * 10), 10);
      this.puntuacion.update(p => p + puntos);
    }
  }
}
```

### 3. **Effect para guardar progreso** (Opcional)
```typescript
export class JuegoNumeros {
  // ... tus signals anteriores
  
  constructor() {
    // Cargar datos guardados
    const datosGuardados = localStorage.getItem('juegoNumeros');
    if (datosGuardados) {
      const datos = JSON.parse(datosGuardados);
      this.puntuacion.set(datos.puntuacion || 0);
    }
    
    // Effect para guardar automÃ¡ticamente
    effect(() => {
      const datos = {
        puntuacion: this.puntuacion(),
        ultimaPartida: new Date().toISOString()
      };
      localStorage.setItem('juegoNumeros', JSON.stringify(datos));
    });
  }
}
```

---

## âœ… Lista de verificaciÃ³n

Marca cuando hayas completado cada parte:

### ImplementaciÃ³n de Signals:
- [ ] Importaste `signal`, `computed`, `effect`
- [ ] Convertiste todas las variables a signals
- [ ] Actualizaste todos los mÃ©todos para usar `.set()` y `.update()`
- [ ] Agregaste parÃ©ntesis `()` en el template
- [ ] Creaste al menos un signal computado

### DiseÃ±o profesional:
- [ ] Implementaste el nuevo template HTML
- [ ] Aplicaste los estilos CSS profesionales
- [ ] La interfaz es responsive (se ve bien en mÃ³vil)
- [ ] Agregaste animaciones y transiciones

### Funcionalidad mejorada:
- [ ] El juego se reinicia correctamente
- [ ] Los mensajes son descriptivos y divertidos
- [ ] Se muestran estadÃ­sticas bÃ¡sicas
- [ ] La navegaciÃ³n funciona correctamente

### Funcionalidades extras (opcional):
- [ ] Historial de nÃºmeros
- [ ] Sistema de puntuaciÃ³n
- [ ] Persistencia de datos
- [ ] Niveles de dificultad

---

## ğŸ¯ Resultado esperado

Al completar esta actividad deberÃ­as tener:

1. **Una aplicaciÃ³n totalmente reactiva** usando Signals
2. **Interfaz profesional** y atractiva
3. **Mejor rendimiento** y respuesta
4. **CÃ³digo mÃ¡s limpio** y mantenible
5. **Experiencia de usuario mejorada**

---

## ğŸ” CÃ³mo probar que funciona

1. **Abre tu aplicaciÃ³n**: `ng serve`
2. **Ve al juego**: `http://localhost:4200/juego-numeros`
3. **Verifica que:**
   - Los nÃºmeros se actualizan instantÃ¡neamente
   - Los mensajes cambian automÃ¡ticamente
   - Las estadÃ­sticas se calculan solas
   - El diseÃ±o se ve profesional
   - Funciona bien en mÃ³vil

---

## ğŸ‰ Â¡Felicidades!

Has completado tu primera aplicaciÃ³n con **Signals de Angular 20**. Ahora entiendes:

- âœ… QuÃ© son los Signals y por quÃ© son Ãºtiles
- âœ… CÃ³mo implementar reactividad moderna
- âœ… Crear interfaces profesionales y atractivas
- âœ… Usar TypeScript, HTML y CSS efectivamente
- âœ… Estructurar aplicaciones Angular modernas

**Â¡EstÃ¡s listo para crear aplicaciones Angular mÃ¡s avanzadas!** ğŸš€

---

## ğŸ“š Recursos para seguir aprendiendo

- [DocumentaciÃ³n oficial de Angular Signals](https://angular.dev/guide/signals)
- [Angular 20 - Nuevas caracterÃ­sticas](https://angular.dev/roadmap)
- [GuÃ­a de CSS Grid y Flexbox](https://css-tricks.com/snippets/css/complete-guide-grid/)
- [TypeScript para principiantes](https://www.typescriptlang.org/docs/)
- ng build --configuration production --base-href "./"
